global
	chroot /var/lib/haproxy
	stats socket /run/haproxy/admin.sock mode 660 level admin
	stats socket ipv4@127.0.0.1:9999 level admin
	stats timeout 30s
	user haproxy
	group haproxy
	daemon

listen stats # Define a listen section called "stats"
	bind :9000 # Listen on localhost:9000
	mode http
	timeout connect 5000
	timeout check 5000
	timeout client 30000
	timeout server 30000

	stats enable  # Enable stats page
	stats realm Haproxy\ Statistics  # Title text for popup window
	stats uri /haproxy_stats  # Stats URI

defaults
	mode	http
	option	httplog
	option	dontlognull
        timeout connect 5000
        timeout client  50000
        timeout server  50000
	errorfile 400 /etc/haproxy/errors/400.http
	errorfile 403 /etc/haproxy/errors/403.http
	errorfile 408 /etc/haproxy/errors/408.http
	errorfile 500 /etc/haproxy/errors/500.http
	errorfile 502 /etc/haproxy/errors/502.http
	errorfile 503 /etc/haproxy/errors/503.http
	errorfile 504 /etc/haproxy/errors/504.http

frontend downstream 
        bind *:4000
	log /dev local0
	log /dev local1 notice
        option forwardfor
        default_backend upstream

backend upstream
        balance roundrobin
  	server-template node 1-100 localhost:3000 check disabled

        option httpchk
